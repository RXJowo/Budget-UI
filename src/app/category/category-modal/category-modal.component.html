<!-- ------ -->
<!-- Header -->
<!-- ------ -->
<ion-header>
  <ion-toolbar>
    <!-- Cancel Button -->
    <ion-buttons slot="start">
      <ion-button color="medium" (click)="cancel()">
        <ion-icon slot="start" name="close" />
        Cancel
      </ion-button>
    </ion-buttons>

    <!-- Title -->
    <ion-title>{{ category.id ? 'Edit' : 'Add' }} category</ion-title>

    <!-- Save Button -->
    <ion-buttons slot="end">
      <ion-button 
        [disabled]="categoryForm.pristine || categoryForm.invalid" 
        (click)="save()">
        <ion-icon slot="start" name="save" />
        Save
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- ------- -->
<!-- Content -->
<!-- ------- -->
<ion-content class="ion-padding" [formGroup]="categoryForm">
  <!-- Input -->
  <ion-item>
    <ion-icon name="text" slot="start" />
    <ion-input 
      #nameInput
      formControlName="name" 
      maxlength="40" 
      placeholder="Name" 
      required="true"
      [clearInput]="true"
    />
  </ion-item>

  <!-- Fehlermeldung -->
  @if (categoryForm.get('name')?.touched && categoryForm.get('name')?.invalid) {
    <div style="color: var(--ion-color-danger); padding: 8px 16px; font-size: 14px;">
      @if (categoryForm.get('name')?.hasError('required')) {
        Name is required
      }
      @if (categoryForm.get('name')?.hasError('maxlength')) {
        Name must be less than 40 characters
      }
    </div>
  }

  <!-- Delete Button - nur im Edit-Modus -->
  @if (category.id) {
    <ion-fab slot="fixed" vertical="bottom" horizontal="end">
      <ion-fab-button color="danger" (click)="delete()">
        <ion-icon name="trash" />
      </ion-fab-button>
    </ion-fab>
  }
</ion-content>